@(wishlist:Wishlist,wishes:Seq[Wish],addWishForm:Form[String])(implicit flash:Flash, currentRecipient: Option[Recipient])

@import helper._

@nautical(wishlist.title) {
	<li><a href="@routes.WishController.showWishlist(wishlist.recipient.username,wishlist.wishlistId.get)">wishlist</a></li>
}{
	
	<div id="view-wishlist-page">



	    @flash.get("message").map { message =>
	    <p class="alert alert-info">
	    	 <button type="button" class="close" data-dismiss="alert">×</button>
	        @message
	    </p>
	    }

	    @flash.get("messageWarning").map { message =>
	    <p class="alert alert-warning">
	    	 <button type="button" class="close" data-dismiss="alert">×</button>
	        @message
	    </p>
	    }

        @for(error <- addWishForm.errors){
        <p class="alert alert-error">
            @error.message: @error.key
        </p>
        }



        <div class="well" >
		
			<h3>@wishlist.title</h3>
		
			<p>A wishlist for <a href="@routes.RecipientController.showProfile(wishlist.recipient.username)">@wishlist.recipient.username</a></p>

			<p>@wishlist.description</p>


		</div>



		@if(wishes.size>0){

		<div class="well" id="wishlist-wishes">




			<h4>Wishes</h4>

				@for(wish <- wishes){
					<div class="modal hide fade" id="wishModal-@wish.wishId" tabindex="-1" role="dialog" aria-labelledby="myModalLabel-@wish.wishId" aria-hidden="true">
					  <div class="modal-header">
					    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
					    <h3 id="myModalLabel-@wish.wishId">@wish.title</h3>
					  </div>
					  <div class="modal-body">
					    <p>@wish.description</p>
					  </div>
					  <div class="modal-footer">
					    @if(currentRecipient.isDefined && wishlist.recipient == currentRecipient.get){
					    	@form(action = routes.WishController.deleteWishFromWishlist(wishlist.recipient.username,wishlist.wishlistId.get,wish.wishId.get), 'class -> "form-inline"){
					    			<button class="btn btn-small" data-dismiss="modal" aria-hidden="true">close</button>
									<button type="submit" class="btn btn-danger btn-small">delete wish</button>
								}
					 		}
					  </div>
					</div>
				}
			<table class="table table-striped">
				<tbody>
					@for(wish <- wishes){

						<tr>
							<td><a href="#wishModal-@wish.wishId" role="button" class="" data-toggle="modal">@wish.title</a></td>
						</tr>
					}
				</tbody>
			</table>
		</div>
		}


	@if(currentRecipient.isDefined && wishlist.recipient == currentRecipient.get){
		<div class="well" >
			@form(action = routes.WishController.addWishToWishlist(wishlist.recipient.username,wishlist.wishlistId.get), 'class -> "form-inline"){
				<input type="text" class="input-large" name="title" placeholder="New wish title" value="@addWishForm("title").value"/>
				<button class="btn btn-success input-medium" type="submit">add wish</button>
			}
		</div>



		<div class="well" >
			<div class="control-group">
				<div class="buttons">
					<a class="btn btn-warning input-small" href="@routes.WishController.showEditWishlist(wishlist.recipient.username,wishlist.wishlistId.get)">edit wishlist</a>
				</div>
			</div>
		</div>

        }

	
	</div>

}