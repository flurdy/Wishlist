@(wishlist:Wishlist,wish:Wish)(implicit currentRecipient: Option[Recipient])


@import helper._

<div class="modal hide fade wish-modal" id="wishModal-@wish.wishId.get" tabindex="-1" role="dialog" aria-labelledby="wishModalLabel-@wish.wishId.get" aria-hidden="true">

    <div class="modal-header wish-read">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3 id="wishModalLabel-@wish.wishId.get"><span>@wish.title</span></h3>
    </div>
    <div class="modal-body wish-read">
        <p>@wish.description</p>
    </div>
    @if(currentRecipient.isDefined && wishlist.recipient == currentRecipient.get){
    @form(action = routes.WishController.updateWish(wishlist.recipient.username,wishlist.wishlistId.get,wish.wishId.get), 'class -> "form-inline update-wish-form" ){

    <input type="hidden" name="wishId" value="@wish.wishId.get"/>
    <div class="modal-header wish-edit noshow">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <input type="text" name="title" class="input-xlarge" placeholder="Wish title" value="@wish.title" maxlength="200"/>
    </div>
    <div class="modal-body wish-edit noshow">
        <textarea name="description" class="input-xlarge" rows="5" placeholder="Describe wish if necessary">@wish.description</textarea>
    </div>

    <div class="modal-footer">
        <button class="wish-cancel-button wish-edit noshow btn btn-small input-small btn-inverse" data-dismiss="modal" aria-hidden="true" type="button">cancel</button>
        <button class="wish-read btn btn-small input-small btn-inverse" data-dismiss="modal" aria-hidden="true" type="button">close</button>
        <button class="wish-edit-button wish-read btn btn-warning input-small btn-small" type="button">edit wish</button>
        <button class="wish-update-button wish-edit noshow btn btn-success input-small btn-small" type="submit">update wish</button>
        }
        @form(action = routes.WishController.removeWishFromWishlist(wishlist.recipient.username,wishlist.wishlistId.get,wish.wishId.get), 'class -> "form-inline"){
        <input type="hidden" name="username" value="@currentRecipient.get.username" />
        <button type="submit" class="wish-edit noshow btn btn-danger input-small btn-small">delete wish</button>
        }
    </div>
    } else {
    <div class="modal-footer">
        <button class="wish-read btn btn-small input-small btn-inverse" data-dismiss="modal" aria-hidden="true" type="button">close</button>
        @if(currentRecipient.isDefined){
        @if(wish.reservation.isDefined){
        @if(wish.reservation.get.isReserver(currentRecipient.get) ){
        @form(action = routes.WishController.unreserveWish(wishlist.recipient.username,wishlist.wishlistId.get,wish.wishId.get), 'class -> "form-inline" ){
        <button class="btn btn-mini btn-warning reserve-button" type="submit">cancel reservation</button>
        }
        }
        } else {
        @form(action = routes.WishController.reserveWish(wishlist.recipient.username,wishlist.wishlistId.get,wish.wishId.get), 'class -> "form-inline" ){
        <button class="btn btn-small btn-primary input-small reserve-button" type="submit">reserve</button>
        }
        }
        }
    </div>
    }
</div>